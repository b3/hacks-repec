#!/bin/bash
# Récupère l'intégralité de l'archive all de RePEc en local.
# 
# usage: get-archive-all [OPTIONS] [DEST]
#
# L'archive est copiée dans DEST/remo/all.
#
# Par défaut DEST=/srv/src/repec/RePEc.
# 
# OPTIONS possibles :
#     -h, --help  affiche ce message

usage () { sed -n '2,/^$/ {s/^ *#// ; s/^ //g ; p }' <$0 ; }
test "x$1" = "x-h" && usage && exit
test "x$1" = "x--help" && usage && exit

set -e
umask 0002

DEST="${1:-/srv/src/repec/RePEc}"

cd "$DEST/remo" && mkdir -p all && cd all &&
wget -r -l inf -nH --cut-dirs=2 -nc "ftp://all.repec.org/RePEc/all"
